<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DM - YAMABIKO</title>
    <link rel="icon" th:href="@{/img/common/favicon.ico}" href="../static/img/common/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/css/style.css}" href="../static/css/style.css" />
</head>
<body class="chat-page">
    <div class="slack-container">
        <!-- 左サイドバー -->
        <div class="slack-sidebar">
            <div class="slack-sidebar-header">
                <div class="slack-workspace-icon">Y</div>
                <div class="slack-workspace-name">YAMABIKO</div>
            </div>
            <div class="slack-sidebar-nav">
                <a href="#" th:href="@{/chat}" class="slack-nav-item">
                    <span class="slack-nav-icon">🏠</span>
                    <span>ホーム</span>
                </a>
                <a href="#" th:href="@{/chat/dm}" class="slack-nav-item active">
                    <span class="slack-nav-icon">💬</span>
                    <span>DM</span>
                </a>
                <a href="#" th:href="@{/chat/activity}" class="slack-nav-item">
                    <span class="slack-nav-icon">🔔</span>
                    <span>アクティビティ</span>
                </a>
            </div>
        </div>
        
        <!-- メインコンテンツ -->
        <div class="slack-main">
            <div class="slack-top-header">
                <div class="slack-header-left">
                    <div class="slack-header-channel-name">ダイレクトメッセージ</div>
                </div>
            </div>
            
            <div class="slack-messages dm-empty-state">
                <div class="dm-empty-state-card">
                    <h2 class="dm-empty-state-title">ダイレクトメッセージ</h2>
                    <p class="dm-empty-state-description">
                        会話を開始するユーザーを選択してください。メッセージはリアルタイムで同期されます。
                    </p>

                    <div th:if="${partners != null && !partners.isEmpty()}" class="dm-user-section">
                        <h3>最近の会話</h3>
                        <ul class="dm-user-list">
                            <li th:each="partner : ${partners}">
                                <a th:href="@{/chat/dm/{id}(id=${partner})}" class="dm-user-link">
                                    <div class="dm-user-primary">
                                        <span class="dm-user-name" th:text="${partner}">ユーザーID</span>
                                        <span class="dm-user-meta">最近アクセスした会話</span>
                                    </div>
                                    <span class="dm-user-chevron">›</span>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div th:if="${allUsers != null && !allUsers.isEmpty()}" class="dm-user-section">
                        <h3>ユーザーを選択して会話を開始</h3>
                        <ul class="dm-user-list">
                            <li th:each="user : ${allUsers}">
                                <a th:href="@{/chat/dm/{id}(id=${user.userId()})}" class="dm-user-link">
                                    <div class="dm-user-primary">
                                        <span class="dm-user-name" th:text="${user.userName() != null ? user.userName() : user.userId()}">ユーザー名</span>
                                        <span th:if="${user.role() == 'ROLE_TEACHER'}" class="dm-user-meta">講師</span>
                                        <span th:if="${user.role() == 'ROLE_ADMIN'}" class="dm-user-meta">管理者</span>
                                    </div>
                                    <span class="dm-user-chevron">›</span>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div th:if="${allUsers == null || allUsers.isEmpty()}" class="dm-empty-feedback">
                        他のユーザーはまだ登録されていません。新規ユーザーが登録されるとここに表示されます。
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

